spring:
  application:
    name: jian-daoyun
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration
      - org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration
  datasource:
    url: jdbc:mysql://localhost:3306/jiandaoyun?useSSL=false&serverTimezone=UTC
    username: root
    password: root
  data:
    mongodb:
      uri: mongodb://localhost:27017/jiandaoyun
    redis:
      host: localhost
      port: 6379
  rabbitmq:
    host: localhost
    port: 5672
    username: guest
    password: guest
    listener:
      simple:
        default-requeue-rejected: false

app:
  cors:
    allowed-origins: http://localhost:5173
  outbox:
    mode: memory
    delivery-mode: log
    consumer:
      idempotent: true
      store: memory
    dispatcher:
      enabled: true
      fixed-delay-ms: 5000
      batch-size: 100
      max-retry: 3
    rabbit:
      exchange: jiandaoyun.outbox.exchange
      queue: jiandaoyun.outbox.queue
      routing-key: jiandaoyun.outbox
      dead-letter-exchange: jiandaoyun.outbox.dlx
      dead-letter-queue: jiandaoyun.outbox.dlq
      dead-letter-routing-key: jiandaoyun.outbox.dlq
      auto-declare: true

server:
  port: 8080
